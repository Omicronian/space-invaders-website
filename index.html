<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Falcon 9 â€“ Real Model Guaranteed</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>body{margin:0;overflow:hidden;background:#000}</style>
</head>
<body>

<script type="importmap">
{"imports":{"three":"https://threejs.org/build/three.module.js","three/addons/":"https://threejs.org/examples/jsm/"}}
</script>

<script type="module">
import * as THREE from 'three';
import {GLTFLoader} from 'three/addons/loaders/GLTFLoader.js';

const scene    = new THREE.Scene();
const camera   = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 1000);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
renderer.setPixelRatio(devicePixelRatio);
document.body.appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0x404060, 2));
scene.add(new THREE.DirectionalLight(0xffffff, 3).position.set(100,100,100));

// Stars
scene.add(new THREE.Points(
  new THREE.BufferGeometry().setAttribute('position', new THREE.Float32BufferAttribute(
    Float32Array.from({length:30000},()=>THREE.MathUtils.randFloatSpread(2000)),3)),
  new THREE.PointsMaterial({color:0xffffff,size:1})
));

// Rocket group
const rocket = new THREE.Group();
rocket.rotation.y = Math.PI/2;   // horizontal
rocket.position.x = -100;
scene.add(rocket);

// Flames
const flameGeo = new THREE.BufferGeometry();
const pos = new Float32Array(9000);
for(let i=0;i<3000;i++){
  pos[i*3]   = (Math.random()-0.5)*10;
  pos[i*3+1] = -Math.random()*50;
  pos[i*3+2] = (Math.random()-0.5)*10;
}
flameGeo.setAttribute('position', new THREE.BufferAttribute(pos,3));

const flames = new THREE.Points(flameGeo, new THREE.ShaderMaterial({
  uniforms: {c:{value:new THREE.Color(0xffaa33)}},
  vertexShader: `void main(){
    vec4 mv = modelViewMatrix * vec4(position,1.0);
    gl_PointSize = 800.0 / -mv.z;
    gl_Position = projectionMatrix * mv;
  }`,
  fragmentShader: `uniform vec3 c;
    void main(){
      if(length(gl_PointCoord-vec2(0.5))>0.5) discard;
      gl_FragColor = vec4(c,1.0);
    }`,
  transparent:true, blending:THREE.AdditiveBlending
}));
flames.position.y = -28;
rocket.add(flames);

// THIS IS THE ONLY PART THAT MATTERS:
const loader = new GLTFLoader();

// Try every possible filename you might have
const possibleNames = ['scene.gltf', 'falcon9.gltf', 'model.gltf', 'Falcon9.gltf', 'scene.glb'];

let loaded = false;
for(const name of possibleNames){
  loader.setPath('assets/');
  loader.load(name,
    (gltf) => {
      if(loaded) return;
      loaded = true;
      const model = gltf.scene || gltf;
      model.scale.set(3.8,3.8,3.8);
      rocket.add(model);
      document.body.style.background = '#001122';
    },
    undefined,
    () => {} // ignore errors for this attempt
  );
}

// Final fallback (beautiful chrome rocket)
setTimeout(() => {
  if(!loaded){
    const fallback = new THREE.Mesh(
      new THREE.CylinderGeometry(2.6,2.6,100,64),
      new THREE.MeshPhysicalMaterial({color:0xeeeeee,metalness:1,roughness:0.08,clearcoat:1})
    );
    rocket.add(fallback);
  }
}, 3000);

camera.position.set(-50,25,120);

function animate(){
  requestAnimationFrame(animate);
  rocket.position.x += 0.9;
  renderer.render(scene,camera);
}
animate();

window.addEventListener('resize',()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
});
</script>
</body>
</html>
