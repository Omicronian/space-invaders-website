<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Lrrr - When Aliens Attack 2</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>
    <style>
        body { margin:0; background:#000022; overflow:hidden; }
    </style>
</head>
<body>

<!-- Lrrr watching from the corner -->
<img src="Lrrr2.png" 
     alt="Lrrr" 
     style="position:fixed; top:10px; right:10px; width:160px; height:auto; z-index:9999; pointer-events:none; filter: drop-shadow(0 0 10px #f00);">

<script>
const config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    backgroundColor: '#000022',
    physics: { default: 'arcade' },
    scene: { preload, create, update }
};

let game = new Phaser.Game(config);
let player, bullets, invaders, cursors, score = 0, scoreText;

function preload() {
    // Player ship (classic green arrow)
    this.load.image('ship', 'https://labs.phaser.io/assets/sprites/ship.png');
    
    // Bullet
    this.load.image('bullet', 'https://labs.phaser.io/assets/sprites/bullet.png');
    
    // Use your own Lrrr image as the invader!
    this.load.image('lrrr-invader', 'Lrrr2.png');  // Make sure Lrrr2.png is in the same folder
}

function create() {
    // Title
    this.add.text(400, 70, 'WHEN ALIENS ATTACK 2', {
        font: '48px Arial Black',
        fill: '#ff0044',
        stroke: '#00ff00',
        strokeThickness: 8
    }).setOrigin(0.5);

    this.add.text(400, 130, 'Defend Earth from Lrrr\'s invasion fleet!', {
        font: '22px Courier New',
        fill: '#00ff99'
    }).setOrigin(0.5);

    // Player
    player = this.physics.add.sprite(400, 540, 'ship').setScale(2);
    player.setCollideWorldBounds(true);

    // Bullets
    bullets = this.physics.add.group();

    // Lrrr invasion fleet
    invaders = this.physics.add.group();
    for (let row = 0; row < 5; row++) {
        for (let col = 0; col < 9; col++) {
            let x = 100 + col * 75;
            let y = 200 + row * 70;
            let lrrr = invaders.create(x, y, 'lrrr-invader')
                .setScale(0.28)  // Adjust this value so Lrrr looks good (0.25–0.35 works well)
                .setTint(0xff5555); // Slight red glow to make him menacing
            
            // Optional: make them bob up and down
            this.tweens.add({
                targets: lrrr,
                y: y + 15,
                duration: 2000,
                yoyo: true,
                repeat: -1,
                ease: 'Sine.easeInOut',
                delay: row * 100 + col * 50
            });
        }
    }

    // Controls
    cursors = this.input.keyboard.createCursorKeys();
    this.input.keyboard.on('keydown-SPACE', shoot);

    // Score
    scoreText = this.add.text(20, 20, 'Score: 0', {
        font: '28px Courier New',
        fill: '#00ff00'
    });

    this.add.text(20, 60, '← → MOVE    SPACE SHOOT', {
        font: '18px Courier New',
        fill: '#00ffaa'
    });
}

function update() {
    player.setVelocityX(0);
    if (cursors.left.isDown) player.setVelocityX(-450);
    if (cursors.right.isDown) player.setVelocityX(450);
}

function shoot() {
    if (bullets.countActive() < 6) {
        let bullet = bullets.create(player.x, player.y - 40, 'bullet')
            .setVelocityY(-800);
        bullet.setScale(1.5);
    }

    // Hit detection
    this.physics.overlap(bullets, invaders, (bullet, invader) => {
        // Big red explosion
        let boom = this.add.circle(invader.x, invader.y, 10, 0xff0000);
        this.tweens.add({
            targets: boom,
            radius: 80,
            alpha: 0,
            duration: 500,
            onComplete: () => boom.destroy()
        });

        // Lrrr roar sound effect (visual only)
        this.add.text(invader.x, invader.y - 30, 'RRRRAAAAHHH!!!', {
            font: '24px Arial Black',
            fill: '#ff0000',
            stroke: '#ffff00',
            strokeThickness: 4
        }).setOrigin(0.5).setDepth(10)
          .setAlpha(1)
          .tweens.add({ alpha: 0, y: invader.y - 80, duration: 1000, onComplete: t => t.target.destroy() });

        bullet.destroy();
        invader.destroy();
        score += 100;
        scoreText.setText('Score: ' + score);

        // Victory
        if (invaders.countActive() === 0) {
            this.add.text(400, 300, 'ALL OMIKRONIANS DESTROYED!\nGOOD NEWS, EVERYONE!', {
                font: '40px Arial Black',
                fill: '#00ff00',
                align: 'center',
                stroke: '#000000',
                strokeThickness: 8
            }).setOrigin(0.5);
        }
    });
}
</script>

</body>
</html>
